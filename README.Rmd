---
title: "Lab 1, Team 5"
output:
  html_document: default
  pdf_document: default
---

Find our Lab 1 repository [here](https://github.com/MirandaTilton/Stat585_Lab1)

# Building a Book

1. we could not compile the book, so no idea yet.

2. 
* The biggest problem when we building the book is that many library are missing. To resolve it, we need to download it manually.
* while running the condition.rmd file, we have a problem with running the `expect_s3_class(err, "error_bad_argument")`. recommend by the instructor, we use `#` to mask line 786-788. 
* using non-standerize package, $emo$, solution: run `devtools::install_github("hadley/emo")`

# Weather Stations

1. Plot

We begin by loading the appropriate packages and reading in the data. 

```{r, warning = F, message = F}
library(tidyverse)
library(ggplot2)
library(readr)
library(ggmap)
library(maps)
library(mapdata)
weather <- read_fwf("ushcn-v2.5-stations.txt", 
                    fwf_positions(c(1,3,4,6,13,22,33,39,42,94),
                                  c(2,3,5,11,20,30,37,40,71,95), 
                    col_names = c("COUNTRY", "NETWORK", "ID_PLACEHOLDERS",
                                "COOP_ID", "LATITUDE", "LONGITUDE",
                                "ELEVATION", "STATE", "NAME", "TimeZone")),
                    col_types = cols("c","c","c","c","d",
                                     "d","d","c","c","i"))
head(weather)
```

For convenience, we turn the timezone variable into a factor with meaningful labels.

```{r}
weather$TimeZone <- as.factor(weather$TimeZone)
levels(weather$TimeZone) = c("ETS", "CTS","MTS","PTS")
```


3. Plot the map with the data
```{r,fig.height=10}
states <- map_data("state")
ggplot(data = states) + 
  geom_polygon(aes(x = long, y = lat, group = group),
               color = "grey", alpha = 0.6) + 
  geom_point(data = weather,aes(x = LONGITUDE, y = LATITUDE,
                              color = (ELEVATION), shape = TimeZone)) +
  theme_bw() +
  coord_fixed(1.3) +
  guides(fill = FALSE)

```

#More Weather Data
1.Unzip the file
```{r}
#gunzip("ushcn.tavg.latest.raw.tar.gz")
#untar("ushcn.tavg.latest.raw.tar")
```

2. Number of files

2. Count the number of files
```{r}
length(list.files("ushcn.v2.5.5.20190130"))
```

3. The coordinate of Fort Dodge, IA is (42.506803,94.180271). Search the weather data for this cordinate.
```{r}
select<- weather %>% 
  filter(LATITUDE>42 & LATITUDE<43 & LONGITUDE< -94 & LONGITUDE> -95)
select
paste(select$COUNTRY[1],select$NETWORK[1],select$ID_PLACEHOLDERS[1],select$COOP_ID[1],".raw.tavg",sep="")
```

